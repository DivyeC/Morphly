name: Render Manim Video

on:
  workflow_dispatch:
    inputs:
      source_file:
        description: "Manim script path"
        required: true
        type: string
      scene_names:
        description: "Scene names"
        required: false
        default: "Main"

jobs:
  render:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: Render Manim
      id: renderer
      uses: pavelzw/manim_community_renderer@master
      with:
        source_file: ${{ github.event.inputs.source_file }}
        scene_names: ${{ github.event.inputs.scene_names }}
        args: "-ql"  # No preview

    - name: Upload MP4 video
      uses: actions/upload-artifact@v4
      with:
        name: manim-mp4
        path: /manim/media/videos/**/Main.mp4  # âœ… Direct MP4
        retention-days: 7
